{% extends "api/api-base.html" %}
{% load get_query %}
{% load data_field_value %}
{% block api_content %}
    <p>
        This page allows downloading CSV exports of our data.
        Please see the <a href="{% url "api-terms" %}">terms page</a> for usage terms.
    </p>
    <p>Although the data is free to use under the terms, we would love to know what you're planning to use it for
        and are happy to answer any questions you might have. <a href="https://democracyclub.org.uk/contact/">
            Please get in touch</a>!</p>
    <p>Please note this data is currently updated every minute.</p>

    <h2>Scheduled elections</h2>
    {% for charismatic_date in charismatic_dates %}
        <form action="{% url "data_export" %}">
            <input type="hidden" name="election_date" value="{{ charismatic_date.isoformat }}">
            <input type="hidden" name="format" value="csv">
            <input type="hidden" name="field_group" value="results">

            <table class="table">
                <caption>{{ charismatic_date }}</caption>
                <thead>
                <tr>
                    <td>Fields</td>
                    <td>Links</td>
                </tr>
                </thead>


                <tbody class="table">

                <tr>

                    <td>
                        <label>
                            Person profiles
                            <input type="checkbox" name="field_group" value="person">
                        </label>
                        <label>
                            Candidacy fields
                            <input type="checkbox" name="field_group" value="candidacy">
                        </label>
                        <label>
                            Election fields
                            <input type="checkbox" name="field_group" value="election">
                        </label>
                    </td>
                    <td>
                        <button type="submit" class="button small">
                            Download
                        </button>
                        <button type="submit" class="button small" formaction="{% url "data_custom_builder" %}">
                            More options
                        </button>
                    </td>
                </tr>

                </tbody>


            </table>
        </form>
    {% endfor %}


{% endblock %}
